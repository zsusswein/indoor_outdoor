# Disentangling the rhythms of human activity in the built environment for airborne transmission risk

This repository provides the data and source code for the following study: 

Zachary Susswein, Eva Rest, Shweta Bansal. "Disentangling the rhythms of human activity in the built environment for 
airborne transmission risk". https://doi.org/10.1101/2022.04.07.22273578 (currently in peer review)

## Data availability

All the computed data and summary stats are available in this repo in the 
`data/` directory, committed with `git-lfs` as parquet files. The original 
SafeGraph files are available from SafeGraph with a user research agreement.
The `indoor_activity_2018_2020.csv` file contains weekly, county-level (fips)
indoor activity estimates.

## Code availability

Code used in these analyses are available in this repository. It can be exeucted 
in a fully reproducible environment using the associated simple `Dockerfile` and 
`Docker-compose.yaml`. It can also be pulled from Docker Hub from 
`zsusswein/indoor_outdoor:latest`.

## Analysis
#### Time series clustering
Python code for the time series clustering in this work can be found in the `time_series_clustering` directory.

#### Sinusoidal fits
R code for the sinusoidal fits in this work can be found in
`code/generate_modularity_class_fits.R`.

#### Robustness checks
The SQL script `generate_sigma_with_uncertain_locations.sql` can be executed with
`duckdb` directly on the parquet files to produce 
`data/sigma_with_unclear_locations.parquet`

#### Supplementary figures
Supplementary figures can be generated by executing `code/generate_supp_figs.R`




